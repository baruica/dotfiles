explain()
{
    if [ "$#" -eq 0 ]; then
        while read  -p "Command: " cmd; do
            curl -Gs "https://www.mankier.com/api/explain/?cols="$(tput cols) --data-urlencode "q=$cmd"
        done
        echo "Bye!"
    elif [ "$#" -eq 1 ]; then
        curl -Gs "https://www.mankier.com/api/explain/?cols="$(tput cols) --data-urlencode "q=$1"
    else
        echo "Usage"
        echo "explain                  interactive mode."
        echo "explain 'cmd -o | ...'   one quoted command to explain it."
    fi
}
# Update 26-03-2015. If using this command gives no output, see if running a simple fetch causes this error:
# $ curl https://www.mankier.com
# curl: (35) Cannot communicate securely with peer: no common encryption algorithm(s).
# If so, try specifying a cipher in the curl commands: curl --ciphers ecdhe_ecdsa_aes_128_sha

ld()
{
    app=${1:-emo}
    dump_prefix=${2:-ets_mo}

    db="dev_${app}"

    zcat $(ls -1 ~/temp/dumps/${dump_prefix}-* | tail -1) \
        | pv --progress --size $(gzip -l $(ls -1 ~/temp/dumps/${dump_prefix}-* | tail -1) | sed -n 2p | awk '{print $2}') --name "${db}" \
        | mysql -uroot -pdevpass1 ${db}
}

md() { /bin/mkdir -p "$1" && cd "$1"; }

routes()
{
    if [ "$#" -eq 0 ]; then
        command -v php >/dev/null 2>&1 && php app/console router:debug
    else
        command -v php >/dev/null 2>&1 && php app/console router:debug | grep "$1"
    fi
}

services()
{
    if [ "$#" -eq 0 ]; then
        command -v php >/dev/null 2>&1 && php app/console container:debug
    else
        command -v php >/dev/null 2>&1 && php app/console container:debug | grep "$1"
    fi
}
